<head>
  <title>castle</title>
</head>

<body>
</body>

<template name="home">
  <div class="container">
    <div class="center jumbotron">
    {{#if hasUser}}
      <h1>Hi {{getDisplayName user}}! Click to join room.</h1>
      <input id="create_room" type='button' value='Create Room' class="btn btn-lg btn-default"/>
      {{> rooms}}
    {{else}}
      <h1>Want to play Castle of the Devil?</h1>
      <p class="lead">Please log in!</p>
       {{> loginButtons}}
    {{/if}}
    </div>
  </div>
</template>

<template name="rooms">
 
  {{#each rooms}}
    {{> room}}
  {{/each}}

</template>

<template name="room">
  <div class="row room_content">
    <h4>Room name: {{_id}}</h4>
    <h4>Current players:</h4>
    <ul class="list-unstyled">
      {{#each users}}
        <li class="username"><h5>{{getDisplayName this}}</h5></li>
      {{/each}}
    </ul>
    {{#if notCreator}}
      <input id="join_room" type='button' value='Join' class="btn btn-success">
    {{/if}}
    <input id="start_game" type='button' value='Start' class="btn btn-success">
    <input id="leave_room" type='button' value='Leave' class="btn btn-failure">
  </div>
</template>

<template name="game">
  {{#with context}}
    <h1>Game {{_id}}</h1>
    {{> player_statuses}}
    {{#with me}}
    {{> my_status}}
    {{/with}}
    {{> get_template_for_action_state}}
  {{/with}}
</template>

<template name="player_statuses">
  <h3>Players</h3>
  <ul class="player-statuses">
  {{#each players}}
    <li>
      {{getDisplayName this}}
  </li>
  {{/each}}
  </ul>
</template>

<template name="my_status">
  <h3>My Status</h3>
  <ul>
    <li>{{getDisplayName this}}</li>
    <li>
      {{#if this.assoc}}
        Society of Open Secrets
      {{else}}
        Order of True Lies
      {{/if}}
    </li>
    <li>Turn Order: {{this.turn}}</li>
    <li>Profession: {{getProfessionName this.prof}}</li>
  </ul>
</template>

<template name="TURN_START_ACTION">

</template>
